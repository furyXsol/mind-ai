"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4421],{67160:function(e,t,a){a.d(t,{u:function(){return Modal}});var n=a(85893),r=a(67294),o=a(75605);let Modal=e=>{let{onClose:t,callback:a,children:i,button_text:s="Close"}=e,[l,u]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"min-w-screen h-screen animated fadeIn faster fixed left-0 top-0 flex justify-center items-center inset-0 z-50 outline-none focus:outline-none bg-no-repeat bg-center bg-cover text-white border border-custom",id:"modal-id",onClick:()=>!l&&t(),children:[(0,n.jsx)("div",{className:"absolute bg-black opacity-80 inset-0 z-0"}),(0,n.jsx)("div",{"data-testid":"modal-div",className:"w-full  max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg bg-level-one",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:(0,n.jsxs)("div",{children:[i,(0,n.jsx)("div",{className:"py-3  mt-2 text-center space-x-4 md:block",children:(0,n.jsx)(o.zx,{className:"w-full",onClick:()=>{a&&a(),t()},children:s})})]})})]})}},10721:function(e,t,a){a.d(t,{TL:function(){return useAppDispatch},CG:function(){return y},C:function(){return r.C},cT:function(){return r.cT},OA:function(){return r.OA},bv:function(){return useNFTApproval},ZW:function(){return useStakingState},dQ:function(){return d.d},A$:function(){return useTokenApproval},mM:function(){return useTokenBalance},pQ:function(){return useTokenPrice},lD:function(){return u.l}});var n=a(79756),r=a(59860),o=a(67294),i=a(17931),s=a(68851),l=a(96266),u=a(42812);let useStakingState=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=useAppDispatch(),{account:a}=(0,u.l)(),[n,r]=(0,o.useState)(!0),[d,m]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{n&&(m(!0),(0,l.ku)(i.STAKING_MODULES,e).then(e=>{t((0,s.jF)(e)),m(!1)}),r(!1)),!e&&a&&t((0,s.Uz)(a,!0))},[a,n,d]),d};a(51128),a(93515);var d=a(50010),m=a(22920),f=a(2707);let useTokenApproval=(e,t,a,n)=>{let[i,s]=(0,o.useState)(!1),[l,u]=(0,o.useState)(!1),d=(0,r.cT)(e,!0);(0,o.useEffect)(()=>{if(d){let e=d.allowance(t,a).then(e=>"0"===n?e.gt(0):e.gte(n)),{promise:r,cancel:o}=(0,f.g)(e);return r.then(e=>s(e)).catch(()=>!0),o}},[n,t,a]);let handleApprove=async()=>{u(!0);try{m.Am.info("Awaiting successful transaction");let e=await d.approve(a,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");await e.wait(),m.Am.success("Transaction successfully complete"),s(!0)}catch(e){m.Am.error(e.reason||e.message)}u(!1)};return{approved:i,loading:l,handleApprove}},useNFTApproval=(e,t,a)=>{let[n,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),u=(0,r.OA)(e,!0);(0,o.useEffect)(()=>{if(u){let e=u.isApprovedForAll(t,a),{promise:n,cancel:r}=(0,f.g)(e);return n.then(e=>i(e)).catch(()=>!0),r}},[t,a]);let handleApprove=async()=>{l(!0);try{m.Am.info("Awaiting successful transaction");let e=await u.setApprovalForAll(a,!0);await e.wait(),m.Am.success("Transaction successfully complete"),i(!0)}catch(e){m.Am.error(e.reason||e.message)}l(!1)};return{approved:n,loading:s,handleApprove}};var g=a(78915),p=a(30765);let useTokenBalance=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[n,r]=(0,o.useState)("0"),{account:i}=(0,u.l)();return(0,o.useEffect)(()=>{let n=(0,p.lN)(e,t);if(n&&i){let fetchBal=async()=>{let e=await (a?g.a[t].getBalance(i):n.balanceOf(i));r(e.toString())};fetchBal();let e=setInterval(fetchBal,1e4);return()=>clearInterval(e)}},[i,e]),n};var _=a(2593),v=a(19981),h=a(41421);let useTokenPrice=e=>{let{symbol:t,decimals:a=18,address:n}=i.k3[e],[r,s]=(0,o.useState)(_.O$.from(0));return(0,o.useEffect)(()=>{let e=(0,v.jq)(t,n),{cancel:r,promise:o}=(0,f.g)(e);return o.then(e=>{s((0,h.eS)(e.toString(),a))}).catch(()=>!0),r},[]),r},useAppDispatch=()=>(0,n.I0)(),y=n.v9},59860:function(e,t,a){a.d(t,{C:function(){return useDecubateContractByAddress},OA:function(){return useERC721Contract},a1:function(){return useDecubateContract},cT:function(){return useERC20Contract}});var n=a(67294),r=a(19485),o=a(64146),i=a(30765),s=a(42812);let c=(e,t,a,n,i)=>e&&t&&a&&(0,r.UJ)(e)?new o.CH(e,t,n?a.getSigner(i).connectUnchecked():a):void 0,useContract=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{provider:r,account:o}=(0,s.l)();return(0,n.useMemo)(()=>c(e,t,r,a,o),[e,t,a,r,o])},useDecubateContract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,{address:n,abi:r}=i.LJ[e];return[useContract(n[a],r,t),n[a]]},useDecubateContractByAddress=function(e,t){var a;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return[useContract(e,null===(a=i.LJ[t])||void 0===a?void 0:a.abi,n),e]},useERC20Contract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.LJ.ERC20.abi;return useContract(e,a,t)},useERC721Contract=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.LJ.ERC721.abi;return useContract(e,a,t)}},51128:function(e,t,a){a.d(t,{e:function(){return useNFT}});var n=a(67294),r=a(2593),o=a(30765),i=a(2707);let getData=async e=>{let[t,a]=await Promise.all([e.totalSupply(),e.name()]);return{total_supply:t,name:a}},useNFT=(e,t)=>{let[a,s]=(0,n.useState)(""),[l,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(r.O$.from(0));return(0,n.useEffect)(()=>{let a=(0,o.al)(e,t);if(a){u(!0);let{promise:e,cancel:t}=(0,i.g)(getData(a));return e.then(e=>{let{total_supply:t,name:a}=e;m(t),s(a),u(!1)}).catch(()=>{s(""),m(r.O$.from(0)),u(!1)}),t}m(r.O$.from(0)),s("")},[e]),{name:a,total_supply:d,nft_loading:l}}},93515:function(e,t,a){a.d(t,{m:function(){return usePairReserves}});var n=a(67294),r=a(2593),o=a(30765),i=a(59850);let usePairReserves=(e,t)=>{let a=e&&(0,o.ti)(e,i.R.Pair,t),[s,l]=(0,n.useState)({reserve0:r.O$.from(0),reserve1:r.O$.from(0)}),[u,d]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(a){if(u)a.getReserves().then(e=>l(e)),d(!1);else{let e=setTimeout(()=>a.getReserves().then(e=>l(e)),5e3);return()=>clearTimeout(e)}}},[s,a,u]),s}},50010:function(e,t,a){a.d(t,{d:function(){return useToken}});var n=a(67294),r=a(30765),o=a(2707);let getData=async e=>{let[t,a]=await Promise.all([e.symbol(),e.decimals()]);return{symbol:t,decimals:a}},useToken=(e,t)=>{let[a,i]=(0,n.useState)(""),[s,l]=(0,n.useState)(18),[u,d]=(0,n.useState)(!1),[m,f]=(0,n.useState)(e),g=(0,n.useMemo)(()=>(0,r.lN)(e,t),[e,t]);return(0,n.useEffect)(()=>{if(!u&&g){let e=getData(g),{cancel:t,promise:a}=(0,o.g)(e);return a.then(e=>{let{symbol:t,decimals:a}=e;i(t),l(a),d(!0)}).catch(()=>{d(!0)}),()=>{t()}}m!==e&&(d(!1),i(""),l(18)),f(e)},[e,t,g,u,m]),{symbol:a,decimals:s}}},96266:function(e,t,a){a.d(t,{wL:function(){return getAddParams},RO:function(){return getPathname},ht:function(){return getSetParams},ku:function(){return getStakingPools}});var n=a(2593),r=a(35553),o=a(27484),i=a.n(o),s=a(17931),l=a(61267),u=a(59850),d=a(91328),m=a(30765),f=a(84379);a(41421);var g=a(88326);let mapPool=async(e,t)=>{switch(e.type){case d.W.NFT:return mapNFTPool(e,t);case d.W.Liquidity:return mapLiquidityPool(e,t);case d.W.Dynamic:return mapDynamicPool(e,t);default:return mapCompoundPool(e,t)}},mapDynamicPool=async(e,t)=>{var a,n;let{contract_idx:r,type:o,address:d}=e,p=e.input.toLowerCase(),_=e.reward.toLowerCase(),v=(0,m.dm)(u.R.ERC20),h=(0,m.dm)(l.XH[o]),y=(0,m.dm)(u.R.LogoStore),[S,[w],[k],[b],[C],[P],[R]]=await (0,f.n)([{target:d,func_name:"multipliers",iface:h,params:[r]},{target:p,func_name:"symbol",iface:v},{target:p,func_name:"decimals",iface:v},{target:_,func_name:"symbol",iface:v},{target:_,func_name:"decimals",iface:v},{target:s.VV[e.chain_id],func_name:"logoSource",iface:y,params:[p]},{target:s.VV[e.chain_id],func_name:"logoSource",iface:y,params:[_]}],e.chain_id),A=await (0,g.WR)(w,b,k,C,e.rewardRate,e.totalInvested);return{name:"".concat(w," - ").concat(b," dynamic"),id:t,contract_idx:r,type:o,address:d,chain_id:e.chain_id,reward_rate:"".concat(A," %"),lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:{address:p,decimals:k,symbol:w,logo:P},reward_token:{address:_,decimals:C,symbol:b,logo:R},total_staked:e.totalInvested.toString(),hardcap:e.hardCap.toString(),end_date:i()(1e3*e.endDate).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:null===(n=S.multi)||void 0===n?void 0:n.toString(),nft_multiplier_used:S.active,nft_name:S.name,is_withdraw_locked:!0}},mapCompoundPool=async(e,t)=>{var a,n,r,o;let{contract_idx:d,type:g,address:p,vault:_}=e,v=e.token.toLowerCase(),h=(0,m.dm)(u.R.ERC20),y=(0,m.dm)(l.XH[g]),S=(0,m.dm)(u.R.LogoStore),[[w],[k],b,[C]]=await (0,f.n)([{target:v,func_name:"symbol",iface:h},{target:v,func_name:"decimals",iface:h},{target:p,func_name:"nftInfo",iface:y,params:[d]},{target:s.VV[e.chain_id],func_name:"logoSource",iface:S,params:[v]}],e.chain_id),P={address:v,decimals:k,symbol:w,logo:C};return{name:"".concat(P.symbol," Compounding"),id:t,contract_idx:d,type:g,chain_id:e.chain_id,reward_rate:Math.round(Number(e.apy)/10*100)/100+"%",lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:P,reward_token:P,total_staked:null===(n=e.totalDeposit)||void 0===n?void 0:n.toString(),hardcap:(null===(r=e.hardCap)||void 0===r?void 0:r.toString())||"1000000000000000000000000000",end_date:i()(e.endDate.mul(1e3).toNumber()).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:(null==b?void 0:null===(o=b.multiplier)||void 0===o?void 0:o.toString())||"10",nft_multiplier_used:(null==b?void 0:b.active)||!1,nft_name:b.name,address:p,vault:_,is_withdraw_locked:!0}},mapNFTPool=async(e,t)=>{var a,n,r;let{contract_idx:o,type:s,address:l}=e,u=e.common.input.toLowerCase(),d=e.common.reward.toLowerCase(),[[m],[g],[p],[_],[v],[h]]=await (0,f.n)(getNFTCalls(u,d,e.chain_id),e.chain_id),[y,S]=[{address:u,symbol:h,name:v,logo:_},{address:d,decimals:g,symbol:m,logo:p}];return{name:e.name,id:t,contract_idx:o,type:s,chain_id:e.chain_id,reward_rate:e.common.rewardRate.toString(),lock_period:null===(a=e.common.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:y,reward_token:S,total_staked:null===(n=e.common.totalInvested)||void 0===n?void 0:n.toString(),hardcap:(null===(r=e.common.hardCap)||void 0===r?void 0:r.toString())||"1000000000000000000000000000",end_date:i()(1e3*e.common.endDate).subtract(e.common.lockPeriodInDays,"days").toISOString(),nft_multiplier:10,nft_multiplier_used:!1,nft_name:"",address:l,max_per_user:e.maxPerUser,collection_start:e.startIdx,collection_end:e.endIdx,logo:e.logo,header_logo:e.headerLogo,staked_tokens:[],available_tokens:[],is_withdraw_locked:e.common.isWithdrawLocked,collection_url:e.collection}},mapLiquidityPool=async(e,t)=>{var a,o;let{contract_idx:d,type:g,address:p}=e,_=(0,m.dm)(u.R.ERC20),v=(0,m.dm)(l.XH[g]),h=(0,m.dm)(u.R.LogoStore),y=(0,m.dm)(u.R.Pair),S=e.input,w=e.reward,[k,b,[C],[P],R,[A]]=await (0,f.n)([{target:p,func_name:"isWrappedNative",iface:v,params:[S]},{target:p,func_name:"multis",iface:v,params:[d]},{target:S,func_name:"token0",iface:y},{target:S,func_name:"token1",iface:y},{target:S,func_name:"getReserves",iface:y},{target:S,func_name:"totalSupply",iface:y}],e.chain_id),[[N],[D],[T],[L],[E],[I],[x],[F],[O]]=await (0,f.n)([{target:C,func_name:"symbol",iface:_},{target:C,func_name:"decimals",iface:_},{target:s.VV[e.chain_id],params:[C],func_name:"logoSource",iface:h},{target:P,func_name:"symbol",iface:_},{target:P,func_name:"decimals",iface:_},{target:s.VV[e.chain_id],params:[P],func_name:"logoSource",iface:h},{target:w,func_name:"symbol",iface:_},{target:w,func_name:"decimals",iface:_},{target:s.VV[e.chain_id],params:[w],func_name:"logoSource",iface:h}],e.chain_id),W=R.reserve0.mul(e.totalInvested).div(A.eq(0)?1:A),V=R.reserve1.mul(e.totalInvested).div(A.eq(0)?1:A),M=N===x?R.reserve0:R.reserve1,q=M.mul(n.O$.from(10).pow(18)).div(A.eq(0)?1:A).mul(2),z=parseFloat((0,r.bM)(q,F)),B=e.rewardRate/1e3,j=(B/z*100).toFixed(2);return{name:"".concat(N," / ").concat(L," -> ").concat(x),id:t,contract_idx:d,type:g,chain_id:e.chain_id,reward_rate:j+"%",lock_period:null===(a=e.lockPeriodInDays)||void 0===a?void 0:a.toString(),input_token:{address:C,decimals:D,symbol:N,logo:T},second_input_token:{address:P,decimals:E,symbol:L,logo:I},reward_token:{address:w,decimals:F,symbol:x,logo:O},total_staked:W.toString(),second_total_staked:V.toString(),hardcap:"0",end_date:i()(1e3*e.endDate).subtract(Number(e.lockPeriodInDays),"days").toISOString(),nft_multiplier:null===(o=b.multi)||void 0===o?void 0:o.toString(),nft_multiplier_used:b.active,nft_name:b.name,address:p,is_withdraw_locked:e.isWithdrawLocked,is_native:[2!==k.pos,k.pos],pair:S}},getNFTCalls=(e,t,a)=>{let n=(0,m.dm)(u.R.ERC20),r=(0,m.dm)(u.R.ERC721),o=(0,m.dm)(u.R.LogoStore);return[{target:t,func_name:"symbol",iface:n},{target:t,func_name:"decimals",iface:n},{target:s.VV[a],func_name:"logoSource",iface:o,params:[t]},{target:s.VV[a],func_name:"logoSource",iface:o,params:[e]},{target:e,func_name:"name",iface:r,params:[]},{target:e,func_name:"symbol",iface:r,params:[]}]},getPathname=e=>e.includes("?")?e.split("?")[0]:e,getStakingPools=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(await Promise.all(e.map(async e=>{let{address:t,type:a,chain_id:n,...r}=e;return(await (0,m.ti)(t,l.XH[a],n).getPools()).map((e,o)=>({...e,address:t,contract_idx:o,type:a,chain_id:n,...r}))}))).reduce((e,t)=>[...e,...t],[]),n=await Promise.all(a.map((e,t)=>mapPool(e,t)));return n.filter(e=>e.type===d.W.NFT?t||!(!e.max_per_user||!e.logo||!e.header_logo):t||!(!e.input_token.logo||!e.reward_token.logo))},getters_getReservesParams=async(e,t,a,o)=>{let i=(0,m.dm)(u.R.Pair),s=(0,m.dm)(u.R.ERC20),[[l],d,[g]]=await (0,f.n)([{target:e,func_name:"token0",iface:i},{target:e,func_name:"getReserves",iface:i},{target:e,func_name:"totalSupply",iface:i}],o),[[p],[_]]=await (0,f.n)([{target:l,func_name:"symbol",iface:s},{target:t,func_name:"symbol",iface:s}],o),v=p===_?d.reserve0:d.reserve1,h=v.mul(n.O$.from(10).pow(18)).div(g.eq(0)?1:g).mul(2),y=parseFloat((0,r.bM)(h,a));return y},getAddParams=async(e,t,a)=>{let{lock_period:n,hardcap:o,end_date:s,input_token:l,is_withdraw_locked:u,reward:m,reward_token:f,chain_id:g}=e,p=i()(s).add(Number(n),"days").unix(),_=Number(m);switch(e.type){case d.W.Compound:return[Math.floor(10*Number(m)).toString(),n,p,(0,r.vz)(o,t),l];case d.W.Dynamic:return[!1,(0,r.vz)(m,a).div(86400),n,p,(0,r.vz)(o,t),l,f];case d.W.NFT:return[u,(0,r.vz)(m,t),n,p,o,l,f];case d.W.Liquidity:return getLiquidityAddParams(l,f,a,u,_,n,p,g)}},getLiquidityAddParams=async(e,t,a,n,r,o,i,s)=>{let l;try{l=await getters_getReservesParams(e,t,a,s)}catch(e){throw Error("Failed to get reserves, please check if pair is vald")}return[n,Math.round(r*l*10),o,i,0,e,t]},getSetParams=async(e,t,a,n)=>{let{lock_period:o,hardcap:u,end_date:m,input_token:f,is_withdraw_locked:g,reward:p,reward_token:_,chain_id:v}=t,h=i()(m).add(Number(o),"days").unix(),y=Number(p);switch(t.type){case d.W.Compound:return[e,Math.floor(10*Number(p)).toString(),o,h,(0,r.vz)(t.hardcap,a),l.n1,f].filter((e,t)=>s.CB&&5!==t||!s.CB);case d.W.Dynamic:return[e,!1,(0,r.vz)(p,n).div(86400),o,h,(0,r.vz)(u,a),f,_];case d.W.NFT:return[e,g,(0,r.vz)(p,a),o,h,u,f,_];case d.W.Liquidity:return getLiquiditySetParams(e,f,_,n,g,y,o,h,v)}},getLiquiditySetParams=async(e,t,a,n,r,o,i,s,l)=>{let u;try{u=await getters_getReservesParams(t,a,n,l)}catch(e){throw Error("Failed to get reserves, please check if pair is vald")}return[e,r,Math.round(o*u*10),i,s,0,t,a]}},2707:function(e,t,a){a.d(t,{g:function(){return cancellablePromise}});let cancellablePromise=e=>{let t={value:!1},a=new Promise((a,n)=>{e.then(e=>t.value?n(t):a(e)).catch(e=>{n(t.value?t:e)})});return{promise:a,cancel:()=>{t.value=!0}}}}}]);